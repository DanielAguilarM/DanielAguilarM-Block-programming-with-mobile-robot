Blockly.defineBlocksWithJsonArray([
  {
    "type": "Up",
    "message0": "%1",  // %1 es para la imagen, %2 para el número, %3 para el texto descriptivo
    "args0": [
      {
        "type": "field_image",
        "src": "Bloques/Up.png",
        "width": 150,
        "height": 60,
        "alt": "Logo"
      },      
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": 150,
    "tooltip": "Usa este bloque para añadir un logo o imagen y ajustar parámetros.",
    "helpUrl": ""
  }
  ,
  {
    "type": "Down",
    "message0": "%1 ",  // %1 es para la imagen, %2 para el número, %3 para el texto descriptivo
    "args0": [
      {
        "type": "field_image",
        "src": "Bloques/Down.png",
        "width": 150,
        "height": 60,
        "alt": "Logo"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": 150,
    "tooltip": "Usa este bloque para añadir un logo o imagen y ajustar parámetros.",
    "helpUrl": ""
  },
  {
    "type": "Left",
    "message0": "%1 ",  // %1 es para la imagen, %2 para el número, %3 para el texto descriptivo
    "args0": [
      {
        "type": "field_image",
        "src": "Bloques/Left.png",
        "width": 150,
        "height": 60,
        "alt": "Logo"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": 150,
    "tooltip": "Usa este bloque para añadir un logo o imagen y ajustar parámetros.",
    "helpUrl": ""
  },
  {
    "type": "Right",
    "message0": "%1",  // %1 es para la imagen, %2 para el número, %3 para el texto descriptivo
    "args0": [
      {
        "type": "field_image",
        "src": "Bloques/Right.png",
        "width": 150,
        "height": 60,
        "alt": "Logo"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": 150,
    "tooltip": "Usa este bloque para añadir un logo o imagen y ajustar parámetros.",
    "helpUrl": ""
  },
  {
    "type": "TopLeft",
    "message0": "%1 ",  // %1 es para la imagen, %2 para el número, %3 para el texto descriptivo
    "args0": [
      {
        "type": "field_image",
        "src": "Bloques/TopLeft.png",
        "width": 150,
        "height": 60,
        "alt": "Logo"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": 150,
    "tooltip": "Usa este bloque para añadir un logo o imagen y ajustar parámetros.",
    "helpUrl": ""
  },
  {
    "type": "TopRight",
    "message0": "%1",  // %1 es para la imagen, %2 para el número, %3 para el texto descriptivo
    "args0": [
      {
        "type": "field_image",
        "src": "Bloques/TopRight.png",
        "width": 150,
        "height": 60,
        "alt": "Logo"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": 150,
    "tooltip": "Usa este bloque para añadir un logo o imagen y ajustar parámetros.",
    "helpUrl": ""
  },
  {
    "type": "BackLeft",
    "message0": "%1 ",  // %1 es para la imagen, %2 para el número, %3 para el texto descriptivo
    "args0": [
      {
        "type": "field_image",
        "src": "Bloques/BackLeft.png",
        "width": 150,
        "height": 60,
        "alt": "Logo"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": 150,
    "tooltip": "Usa este bloque para añadir un logo o imagen y ajustar parámetros.",
    "helpUrl": ""
  },
  {
    "type": "BackRight",
    "message0": "%1",  // %1 es para la imagen, %2 para el número, %3 para el texto descriptivo
    "args0": [
      {
        "type": "field_image",
        "src": "Bloques/BackRight.png",
        "width": 150,
        "height": 60,
        "alt": "Logo"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": 150,
    "tooltip": "Usa este bloque para añadir un logo o imagen y ajustar parámetros.",
    "helpUrl": ""
  }, 
  {
    "type": "TurnLeft",
    "message0": "%1",  // %1 es para la imagen, %2 para el número, %3 para el texto descriptivo
    "args0": [
      {
        "type": "field_image",
        "src": "Bloques/TurnLeft.png",
        "width": 150,
        "height": 60,
        "alt": "Logo"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": 150,
    "tooltip": "Usa este bloque para añadir un logo o imagen y ajustar parámetros.",
    "helpUrl": ""
  },
  {
    "type": "TurnRight",
    "message0": "%1",  // %1 es para la imagen, %2 para el número, %3 para el texto descriptivo
    "args0": [
      {
        "type": "field_image",
        "src": "Bloques/TurnRight.png",
        "width": 150,
        "height": 60,
        "alt": "Logo"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": 150,
    "tooltip": "Usa este bloque para añadir un logo o imagen y ajustar parámetros.",
    "helpUrl": ""
  },
  {
    "type": "Led",
    "message0": "%1 %2",
    "args0": [
      {
        "type": "field_image",
        "src": "Bloques/Led.png",
        "width": 64,
        "height": 64,
        "alt": "Descripción alternativa"
      },
      {
        "type": "field_dropdown",
        "name": "COLOR_DROPDOWN",
        "options": [
          ["Rojo", "RED"],
          ["Azul", "BLUE"],
          ["Amarillo", "YELLOW"],
          ["Rosa", "PINK"]
          
        ]
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": "#0afff3",
    "tooltip": "Usa este bloque para añadir un logo o imagen y ajustar parámetros.",
    "helpUrl": ""
  },     
  {
    "type": "Sound",
    "message0": "%1 %2",  // %1 es para la imagen, %2 para el número, %3 para el texto descriptivo
    "args0": [
      {
        "type": "field_image",
        "src": "Bloques/SoundA.png",
        "width": 150,
        "height": 60,
        "alt": "Logo"
      },
      {
        "type": "field_dropdown",
        "name": "LETTER_INPUT",
        "options": [
          ["A", "A"],
          ["B", "B"],
          ["C", "C"],
          ["D", "D"],
          ["E", "E"],
          ["F", "F"],
          ["G", "G"],
          ["H", "H"]
        ]
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": 150,
    "tooltip": "Usa este bloque para añadir un logo o imagen y ajustar parámetros.",
    "helpUrl": ""
},{
  "type": "Sensor",
  "message0": "%1 %2",  // %1 es para la imagen, %2 para el número, %3 para el texto descriptivo
  "args0": [
    {
      "type": "field_image",
      "src": "Bloques/Sensorr.png",
      "width": 150,
      "height": 60,
      "alt": "Logo"
    },
    {
      "type": "field_dropdown",
      "name": "GRADES_DROPDOWN",
      "options": [
        ["frontal", "F"],
        ["izquierda", "L"],
        ["derecha", "R"]      
      ]
    }
  ],
  "previousStatement": null,
  "nextStatement": null,
  "colour": 150,
  "tooltip": "Usa este bloque para añadir un logo o imagen y ajustar parámetros.",
  "helpUrl": ""
}
  ]);

  Blockly.JavaScript['Down'] = function(block) {
    // Acceder al valor numérico del campo 'NUM_INPUT' 
    // Crear la cadena de retorno incorporando el valor numérico
    var code = 'Down_60;\n' +'Stop;\n';
    return code;
  };
  
  Blockly.JavaScript['Up'] = function(block) {
    // Acceder al valor numérico del campo 'NUM_INPUT'  
    // Crear la cadena de retorno incorporando el valor numérico
    var code = 'Up_60;\n'+'Stop;\n';
    return code;
  };
  
  Blockly.JavaScript['Left'] = function(block) {
    // Crear la cadena de retorno incorporando el valor numérico
    var code = 'Left_60;\nStop;\n';
    return code;
  };
  
  Blockly.JavaScript['Right'] = function(block) {  
    // Crear la cadena de retorno incorporando el valor numérico
    var code = 'Right_60;\nStop;\n';
    return code;
  };
  
  Blockly.JavaScript['TopLeft'] = function(block) {
    // Crear la cadena de retorno incorporando el valor numérico
    var code = 'TPLeft_85;\nStop;\n';
    return code;
  };
  
  Blockly.JavaScript['TopRight'] = function(block) {  
    // Crear la cadena de retorno incorporando el valor numérico
    var code = 'TPRight_85;\nStop;\n';
    return code;
  };
  
  Blockly.JavaScript['BackLeft'] = function(block) {
    // Crear la cadena de retorno incorporando el valor numérico
    var code = 'BCLeft_85;\nStop;\n';
    return code;
  };
  
  Blockly.JavaScript['BackRight'] = function(block) {  
    // Crear la cadena de retorno incorporando el valor numérico
    var code = 'BCRight_85;\nStop;\n';
    return code;
  };
  
  Blockly.JavaScript['TurnLeft'] = function(block) {
    // Crear la cadena de retorno incorporando el valor numérico
    var code = 'TLeft90;\nStop;\n';
    return code;
  };
  
  Blockly.JavaScript['TurnRight'] = function(block) {
    // Crear la cadena de retorno incorporando el valor numérico
    var code = 'TRight90;\nStop;\n';
    return code;
  };
  Blockly.JavaScript['Sensor'] = function(block) {
    var dropdown_value = block.getFieldValue('GRADES_DROPDOWN');
  
    // Crear la cadena de retorno incorporando el valor numérico
    var code = 'Sensor' + dropdown_value + ';\nStop;\n';
    return code;
  };

  Blockly.Blocks['Led'] = {
    init: function() {
        this.jsonInit({
            "message0": "%1 %2",
            "args0": [
                {
                    "type": "field_image",
                    "src": "Bloques/Led.png",
                    "width": 64,
                    "height": 64,
                    "alt": "Descripción alternativa"
                },
                {
                    "type": "field_dropdown",
                    "name": "COLOR_DROPDOWN",
                    "options": [
                      ["Rojo", "RED"],
                      ["Azul", "BLUE"],
                      ["Amarillo", "YELLOW"],
                      ["Rosa", "PINK"]
                    ]
                }
            ],
            "previousStatement": null,
            "nextStatement": null,
            "colour": "#14c9c0",
            "tooltip": "Usa este bloque para añadir un logo o imagen y ajustar parámetros.",
            "helpUrl": ""
        });
  
        // Actualiza el color del bloque basándose en el valor actual del dropdown
        this.getField('COLOR_DROPDOWN').setValidator((newValue) => {
            this.updateBlockColour(newValue);
            return newValue;
        });
    },
  
    // Función para actualizar el color del bloque
    updateBlockColour: function(color) {
        switch(color) {
            case 'RED':
                this.setColour("#b50427");
                break;
            case 'BLUE':
                this.setColour("#0412b5");
                break;
            case 'YELLOW':
                this.setColour("#FFFF00");
                break;
            case 'PINK':
                this.setColour("#FFC0CB");
                break;
            default:
                this.setColour("#14c9c0");  // Default color
        }
    }
  };
  

Blockly.JavaScript['Led'] = function(block) {
  var dropdown_value = block.getFieldValue('COLOR_DROPDOWN');
  var code =  dropdown_value + ';\nStop;\n';
  return code;
};

Blockly.JavaScript['Sound'] = function(block) {
  var letter = block.getFieldValue('LETTER_INPUT');  // Obtiene el valor actual del campo de entrada
  // Genera código que será parte del archivo .txt exportado
  var code = 'Sound'  + letter + ';\nStop;\n';  // Agrega una nueva línea para claridad
  return code;
};

